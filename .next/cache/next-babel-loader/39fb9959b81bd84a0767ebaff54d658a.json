{"ast":null,"code":"import { schema, use } from \"nexus\";\nimport { prisma } from \"nexus-plugin-prisma\";\nuse(prisma({\n  features: {\n    crud: true\n  }\n}));\nschema.objectType({\n  name: \"Ppl\",\n\n  definition(t) {\n    t.model.id();\n    t.model.name();\n  }\n\n});\nschema.objectType({\n  name: \"Product\",\n\n  definition(t) {\n    t.model.id();\n    t.model.name();\n  }\n\n});\nschema.addToContext(_req => {\n  return {\n    customReq: _req\n  };\n});\nschema.queryType({\n  async definition(t) {\n    t.list.field(\"allUsers\", {\n      type: \"Ppl\",\n\n      resolve(_parent, _args, ctx) {\n        return ctx.db.ppl.findMany({});\n      }\n\n    });\n    t.crud.ppl();\n    t.crud.ppls();\n    t.list.field(\"allProducts\", {\n      type: \"Product\",\n\n      // args: {\n      //   skip: schema.intArg({nullable: true}),\n      //   take: schema.intArg({nullable: true}),\n      // },\n      resolve(_parent, _args, ctx) {\n        console.log(_args.skip);\n        return ctx.db.product.findMany({\n          skip: 0,\n          take: 2\n        });\n      }\n\n    });\n    t.list.field(\"product\", {\n      type: \"Product\",\n      args: {\n        queryStr: schema.stringArg({\n          nullable: true\n        })\n      },\n      resolve: async (_parent, _args, ctx) => {\n        try {\n          const product = await ctx.db.product.findMany({\n            where: {\n              OR: [{\n                id: _args === null || _args === void 0 ? void 0 : _args.queryStr\n              }, {\n                name: _args === null || _args === void 0 ? void 0 : _args.queryStr\n              }]\n            }\n          }); // const product = t.crud.product(_args?.id!.toString() as ProductWhereUniqueInput);\n\n          return product;\n        } catch (error) {\n          throw new Error(error);\n        }\n      }\n    }); // t.crud.product();\n    // t.crud.products();\n  }\n\n});\nschema.mutationType({\n  definition(t) {\n    t.field(\"bigRedButton\", {\n      type: \"String\",\n\n      async resolve(_parent, _args, ctx) {\n        const {\n          count\n        } = await ctx.db.ppl.deleteMany({});\n        return `${count} user(s) destroyed. Thanos will be proud.`;\n      }\n\n    });\n    t.crud.createOnePpl();\n    t.crud.deleteOnePpl();\n    t.crud.deleteManyPpl();\n    t.crud.updateOnePpl();\n    t.crud.updateManyPpl();\n    t.field(\"productMutation\", {\n      type: \"String\",\n\n      async resolve(_parent, _args, ctx) {\n        const {\n          count\n        } = await ctx.db.product.deleteMany({});\n        return `${count} user(s) destroyed. Thanos will be proud.`;\n      }\n\n    });\n    t.crud.createOneProduct();\n    t.crud.deleteOneProduct();\n    t.crud.deleteManyProduct();\n    t.crud.updateOneProduct();\n    t.crud.updateManyProduct();\n  }\n\n}); // schema.mutationType({\n//   definition(t) {\n//     t.field(\"bigRedButton\", {\n//       type: \"String\",\n//       async resolve(_parent, _args, ctx) {\n//         const { count } = await ctx.db.ppl.deleteMany({});\n//         return `${count} user(s) destroyed. Thanos will be proud.`;\n//       },\n//     });\n//\n//     t.crud.createOnePpl();\n//     t.crud.deleteOnePpl();\n//     t.crud.deleteManyPpl();\n//     t.crud.updateOnePpl();\n//     t.crud.updateManyPpl();\n//   },\n// });","map":{"version":3,"sources":["/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/graphql/schema.ts"],"names":["schema","use","prisma","features","crud","objectType","name","definition","t","model","id","addToContext","_req","customReq","queryType","list","field","type","resolve","_parent","_args","ctx","db","ppl","findMany","ppls","console","log","skip","product","take","args","queryStr","stringArg","nullable","where","OR","error","Error","mutationType","count","deleteMany","createOnePpl","deleteOnePpl","deleteManyPpl","updateOnePpl","updateManyPpl","createOneProduct","deleteOneProduct","deleteManyProduct","updateOneProduct","updateManyProduct"],"mappings":"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","sourcesContent":["import { schema, use } from \"nexus\";\nimport { prisma } from \"nexus-plugin-prisma\";\n\nuse(prisma({ features: { crud: true } }));\n\nschema.objectType({\n  name: \"Ppl\",\n  definition(t) {\n    t.model.id();\n    t.model.name();\n  },\n});\n\nschema.objectType({\n  name: \"Product\",\n  definition(t) {\n    t.model.id();\n    t.model.name();\n  },\n});\n\nschema.addToContext(_req => {\n  return {\n    customReq: _req,\n  }\n})\n\n\nschema.queryType({\n  async definition(t) {\n    t.list.field(\"allUsers\", {\n      type: \"Ppl\",\n      resolve(_parent, _args, ctx) {\n        return ctx.db.ppl.findMany({});\n      },\n    });\n\n    t.crud.ppl();\n    t.crud.ppls();\n\n    t.list.field(\"allProducts\", {\n      type: \"Product\",\n      // args: {\n      //   skip: schema.intArg({nullable: true}),\n      //   take: schema.intArg({nullable: true}),\n      // },\n      resolve(_parent, _args, ctx) {\n        console.log(_args.skip)\n        return ctx.db.product.findMany({\n          skip: 0,\n          take: 2,\n        });\n      },\n    });\n\n    t.list.field(\"product\", {\n      type: \"Product\",\n      args: { queryStr: schema.stringArg({nullable: true})},\n      resolve: async(_parent, _args, ctx) => {\n        try {\n          const product = await ctx.db.product.findMany({\n            where: {\n              OR: [\n                { id: _args?.queryStr! },\n                { name: _args?.queryStr! },\n              ],\n            },\n          });\n          // const product = t.crud.product(_args?.id!.toString() as ProductWhereUniqueInput);\n          return product;\n        } catch (error) {\n          throw  new Error(error)\n        }\n\n    }\n  });\n\n    // t.crud.product();\n    // t.crud.products();\n  },\n});\n\nschema.mutationType({\n  definition(t) {\n    t.field(\"bigRedButton\", {\n      type: \"String\",\n      async resolve(_parent, _args, ctx) {\n        const { count } = await ctx.db.ppl.deleteMany({});\n        return `${count} user(s) destroyed. Thanos will be proud.`;\n      },\n    });\n\n    t.crud.createOnePpl();\n    t.crud.deleteOnePpl();\n    t.crud.deleteManyPpl();\n    t.crud.updateOnePpl();\n    t.crud.updateManyPpl();\n\n    t.field(\"productMutation\", {\n      type: \"String\",\n      async resolve(_parent, _args, ctx) {\n        const { count } = await ctx.db.product.deleteMany({});\n        return `${count} user(s) destroyed. Thanos will be proud.`;\n      },\n    });\n\n    t.crud.createOneProduct();\n    t.crud.deleteOneProduct();\n    t.crud.deleteManyProduct();\n    t.crud.updateOneProduct();\n    t.crud.updateManyProduct();\n  },\n});\n\n// schema.mutationType({\n//   definition(t) {\n//     t.field(\"bigRedButton\", {\n//       type: \"String\",\n//       async resolve(_parent, _args, ctx) {\n//         const { count } = await ctx.db.ppl.deleteMany({});\n//         return `${count} user(s) destroyed. Thanos will be proud.`;\n//       },\n//     });\n//\n//     t.crud.createOnePpl();\n//     t.crud.deleteOnePpl();\n//     t.crud.deleteManyPpl();\n//     t.crud.updateOnePpl();\n//     t.crud.updateManyPpl();\n//   },\n// });\n"]},"metadata":{},"sourceType":"module"}