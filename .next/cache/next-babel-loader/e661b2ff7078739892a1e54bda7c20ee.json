{"ast":null,"code":"var _jsxFileName = \"/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/components/Modal/index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { Modal, Backdrop, Fade, Button, CircularProgress, Box, FormGroup, TextField } from '@material-ui/core';\nimport { request } from \"graphql-request\";\nimport { mutate, trigger } from 'swr';\nimport useStyles from './style';\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport { object, string } from \"yup\";\n\nconst sleep = time => new Promise(acc => setTimeout(acc, time));\n/* GraphQL */\n\n\nconst REMOVE_PRODUCT =\n/* GraphQL */\n`\n    mutation removeProductById($id: String!) {\n        removeProductById(id: $id) {\n            id\n            name\n        }\n    }\n`;\n/* GraphQL */\n\nconst CREATE_PRODUCT2 =\n/* GraphQL */\n`\n  mutation createNewOneProduct($name: String!) {\n    createNewOneProduct(name: $name) {\n      id\n      name\n    }\n  }\n`;\nconst API = 'http://localhost:3000/api/graphql';\nconst initialValues = {\n  name: ''\n}; // @ts-ignore\n\nexport default function TransitionsModal({\n  redirectRouting,\n  currentPage,\n  handleOpen,\n  product,\n  handleClose,\n  open,\n  isEdit\n}) {\n  const classes = useStyles();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n\n  const handleRemoveInModal = async e => {\n    e.preventDefault();\n    e.stopPropagation();\n    await setIsLoading(true);\n    await mutate(API);\n    const {\n      id\n    } = product;\n    await request(API, REMOVE_PRODUCT, {\n      id\n    });\n    await trigger(API);\n    await sleep(2000);\n    await handleClose(e); // await redirectRouting(String(currentPage))\n    // await Router.replace(`/products/${currentPage}`,  `/products/${currentPage}`, {shallow: true})\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, __jsx(Modal, {\n    className: classes.modal,\n    open: open,\n    onClose: handleClose,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, __jsx(Fade, {\n    in: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, __jsx(\"h2\", {\n    id: \"transition-modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, isEdit ? 'EDIT' : 'DELETE', \" THIS PRODUCT\"), __jsx(\"p\", {\n    id: \"transition-modal-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, \"Do you want to \", isEdit ? 'edit' : 'delete', \" this item?.\"), isEdit ? __jsx(Formik, {\n    validationSchema: object({\n      name: string().required().min(2).max(50)\n    }),\n    initialValues: initialValues,\n    onSubmit: () => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, ({\n    isSubmitting\n  }) => __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }, __jsx(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 41\n    }\n  }, __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 45\n    }\n  }, __jsx(Field, {\n    name: \"name\",\n    as: TextField,\n    label: \"Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 49\n    }\n  }), __jsx(ErrorMessage, {\n    name: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 49\n    }\n  }))), __jsx(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    color: \"primary\",\n    type: \"submit\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 41\n    }\n  }, \"SUBMIT\"), __jsx(Button, {\n    size: \"small\",\n    variant: \"outlined\",\n    color: \"default\",\n    type: \"submit\",\n    onClick: handleClose,\n    disabled: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 41\n    }\n  }, \"CANCEL\"))) : __jsx(React.Fragment, null, __jsx(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleRemoveInModal,\n    startIcon: isLoading ? __jsx(CircularProgress, {\n      size: \"1rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 60\n      }\n    }) : null,\n    disabled: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, \"REMOVE\"), __jsx(Button, {\n    size: \"small\",\n    variant: \"outlined\",\n    color: \"default\",\n    type: \"submit\",\n    onClick: handleClose,\n    disabled: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 33\n    }\n  }, \"CANCEL\"))))));\n}","map":{"version":3,"sources":["/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/components/Modal/index.tsx"],"names":["React","useState","Modal","Backdrop","Fade","Button","CircularProgress","Box","FormGroup","TextField","request","mutate","trigger","useStyles","ErrorMessage","Field","Form","Formik","object","string","sleep","time","Promise","acc","setTimeout","REMOVE_PRODUCT","CREATE_PRODUCT2","API","initialValues","name","TransitionsModal","redirectRouting","currentPage","handleOpen","product","handleClose","open","isEdit","classes","isLoading","setIsLoading","handleRemoveInModal","e","preventDefault","stopPropagation","id","modal","timeout","paper","required","min","max","isSubmitting"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAAQC,KAAR,EAAeC,QAAf,EAAyBC,IAAzB,EAA+BC,MAA/B,EAAuCC,gBAAvC,EAAyDC,GAAzD,EAA8DC,SAA9D,EAAyEC,SAAzE,QAAmG,mBAAnG;AAEA,SAAQC,OAAR,QAAsB,iBAAtB;AACA,SAAgBC,MAAhB,EAAwBC,OAAxB,QAAsC,KAAtC;AACA,OAAOC,SAAP,MAAsB,SAAtB;AAGA,SAAQC,YAAR,EAAsBC,KAAtB,EAA6BC,IAA7B,EAAmCC,MAAnC,QAA4E,QAA5E;AAEA,SAAQC,MAAR,EAAgBC,MAAhB,QAA6B,KAA7B;;AAEA,MAAMC,KAAK,GAAIC,IAAD,IAAU,IAAIC,OAAJ,CAAaC,GAAD,IAASC,UAAU,CAACD,GAAD,EAAMF,IAAN,CAA/B,CAAxB;AAEA;;;AACA,MAAMI,cAAc;AAAG;AAAc;;;;;;;CAArC;AASA;;AACA,MAAMC,eAAe;AAAG;AAAe;;;;;;;CAAvC;AASA,MAAMC,GAAG,GAAG,mCAAZ;AAYA,MAAMC,aAAa,GAAG;AAClBC,EAAAA,IAAI,EAAE;AADY,CAAtB,C,CAIA;;AACA,eAAe,SAASC,gBAAT,CAA0B;AAACC,EAAAA,eAAD;AAAkBC,EAAAA,WAAlB;AAA+BC,EAAAA,UAA/B;AAA2CC,EAAAA,OAA3C;AAAoDC,EAAAA,WAApD;AAAiEC,EAAAA,IAAjE;AAAuEC,EAAAA;AAAvE,CAA1B,EAAkH;AAC7H,QAAMC,OAAO,GAAGzB,SAAS,EAAzB;AACA,QAAM;AAAA,OAAC0B,SAAD;AAAA,OAAYC;AAAZ,MAA4BvC,QAAQ,CAAC,KAAD,CAA1C;;AACA,QAAMwC,mBAAmB,GAAG,MAAOC,CAAP,IAAa;AAEvCA,IAAAA,CAAC,CAACC,cAAF;AACAD,IAAAA,CAAC,CAACE,eAAF;AAEA,UAAMJ,YAAY,CAAC,IAAD,CAAlB;AAEA,UAAM7B,MAAM,CAACgB,GAAD,CAAZ;AACA,UAAM;AAACkB,MAAAA;AAAD,QAAOX,OAAb;AACA,UAAMxB,OAAO,CAACiB,GAAD,EAAMF,cAAN,EAAsB;AAACoB,MAAAA;AAAD,KAAtB,CAAb;AACA,UAAMjC,OAAO,CAACe,GAAD,CAAb;AAEA,UAAMP,KAAK,CAAC,IAAD,CAAX;AAEA,UAAMe,WAAW,CAACO,CAAD,CAAjB,CAduC,CAgBvC;AACA;AACD,GAlBD;;AAoBA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,KAAD;AACI,IAAA,SAAS,EAAEJ,OAAO,CAACQ,KADvB;AAEI,IAAA,IAAI,EAAEV,IAFV;AAGI,IAAA,OAAO,EAAED,WAHb;AAII,IAAA,oBAAoB,MAJxB;AAKI,IAAA,iBAAiB,EAAEhC,QALvB;AAMI,IAAA,aAAa,EAAE;AACX4C,MAAAA,OAAO,EAAE;AADE,KANnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUI,MAAC,IAAD;AAAM,IAAA,EAAE,EAAEX,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAEE,OAAO,CAACU,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,EAAE,EAAC,wBAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCX,MAAM,GAAG,MAAH,GAAY,QAAnD,kBADJ,EAEI;AAAG,IAAA,EAAE,EAAC,8BAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAqDA,MAAM,GAAG,MAAH,GAAY,QAAvE,iBAFJ,EAGKA,MAAM,GACH,MAAC,MAAD;AACI,IAAA,gBAAgB,EACZnB,MAAM,CAAC;AACHW,MAAAA,IAAI,EAAEV,MAAM,GAAG8B,QAAT,GAAoBC,GAApB,CAAwB,CAAxB,EAA2BC,GAA3B,CAA+B,EAA/B;AADH,KAAD,CAFd;AAMI,IAAA,aAAa,EAAEvB,aANnB;AAOI,IAAA,QAAQ,EAAE,MAAM,CAAE,CAPtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQK,CAAC;AAACwB,IAAAA;AAAD,GAAD,KACG,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,KAAD;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,EAAE,EAAE3C,SAAvB;AAAkC,IAAA,KAAK,EAAC,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,MAAC,YAAD;AAAc,IAAA,IAAI,EAAC,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,CADJ,EAOI,MAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AACQ,IAAA,OAAO,EAAC,WADhB;AAEQ,IAAA,KAAK,EAAC,SAFd;AAGQ,IAAA,IAAI,EAAC,QAHb;AAGsB,IAAA,QAAQ,EAAE2C,YAHhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPJ,EAWI,MAAC,MAAD;AACI,IAAA,IAAI,EAAC,OADT;AAEI,IAAA,OAAO,EAAC,UAFZ;AAGI,IAAA,KAAK,EAAC,SAHV;AAII,IAAA,IAAI,EAAC,QAJT;AAKI,IAAA,OAAO,EAAEjB,WALb;AAMI,IAAA,QAAQ,EAAEI,SANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAXJ,CATR,CADG,GAiCH,4BACI,MAAC,MAAD;AACI,IAAA,IAAI,EAAC,OADT;AAEI,IAAA,OAAO,EAAC,WAFZ;AAGI,IAAA,KAAK,EAAC,SAHV;AAII,IAAA,OAAO,EAAEE,mBAJb;AAKI,IAAA,SAAS,EAAEF,SAAS,GAAG,MAAC,gBAAD;AAAkB,MAAA,IAAI,EAAC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,GAAsC,IAL9D;AAMI,IAAA,QAAQ,EAAEA,SANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EASI,MAAC,MAAD;AACI,IAAA,IAAI,EAAC,OADT;AAEI,IAAA,OAAO,EAAC,UAFZ;AAGI,IAAA,KAAK,EAAC,SAHV;AAII,IAAA,IAAI,EAAC,QAJT;AAKI,IAAA,OAAO,EAAEJ,WALb;AAMI,IAAA,QAAQ,EAAEI,SANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,CApCR,CADJ,CAVJ,CADJ,CADJ;AAyEH","sourcesContent":["import React, {useState} from 'react';\nimport {Modal, Backdrop, Fade, Button, CircularProgress, Box, FormGroup, TextField, MenuItem} from '@material-ui/core';\n\nimport {request} from \"graphql-request\";\nimport useSWR, {mutate, trigger} from 'swr'\nimport useStyles from './style';\nimport Router, {useRouter} from \"next/router\";\nimport {Product} from \"../../interfaces\";\nimport {ErrorMessage, Field, Form, Formik, FormikConfig, FormikValues} from \"formik\";\nimport Loading from \"../Loading\";\nimport {object, string} from \"yup\";\n\nconst sleep = (time) => new Promise((acc) => setTimeout(acc, time));\n\n/* GraphQL */\nconst REMOVE_PRODUCT = /* GraphQL */`\n    mutation removeProductById($id: String!) {\n        removeProductById(id: $id) {\n            id\n            name\n        }\n    }\n`\n\n/* GraphQL */\nconst CREATE_PRODUCT2 = /* GraphQL */ `\n  mutation createNewOneProduct($name: String!) {\n    createNewOneProduct(name: $name) {\n      id\n      name\n    }\n  }\n`;\n\nconst API = 'http://localhost:3000/api/graphql'\n\nexport interface IModel {\n  currentPage: any\n  handleOpen: (e: any)=> void\n  product: Product\n  handleClose: (e: any)=> void\n  redirectRouting:  (currentPage: string)=> void\n  open: boolean\n  isEdit: boolean\n}\n\nconst initialValues = {\n    name: '',\n}\n\n// @ts-ignore\nexport default function TransitionsModal({redirectRouting, currentPage, handleOpen, product, handleClose, open, isEdit}: IModel) {\n    const classes = useStyles();\n    const [isLoading, setIsLoading] = useState(false);\n    const handleRemoveInModal = async (e) => {\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      await setIsLoading(true)\n\n      await mutate(API);\n      const {id} = product;\n      await request(API, REMOVE_PRODUCT, {id})\n      await trigger(API);\n\n      await sleep(2000);\n\n      await handleClose(e);\n\n      // await redirectRouting(String(currentPage))\n      // await Router.replace(`/products/${currentPage}`,  `/products/${currentPage}`, {shallow: true})\n    }\n\n    return (\n        <div>\n            <Modal\n                className={classes.modal}\n                open={open}\n                onClose={handleClose}\n                closeAfterTransition\n                BackdropComponent={Backdrop}\n                BackdropProps={{\n                    timeout: 500,\n                }}\n            >\n                <Fade in={open}>\n                    <div className={classes.paper}>\n                        <h2 id=\"transition-modal-title\">{isEdit ? 'EDIT' : 'DELETE'} THIS PRODUCT</h2>\n                        <p id=\"transition-modal-description\">Do you want to {isEdit ? 'edit' : 'delete'} this item?.</p>\n                        {isEdit ?\n                            <Formik\n                                validationSchema={\n                                    object({\n                                        name: string().required().min(2).max(50),\n                                    })\n                                }\n                                initialValues={initialValues}\n                                onSubmit={() => {}}>\n                                {({isSubmitting}) => (\n                                    <Form>\n                                        <Box>\n                                            <FormGroup>\n                                                <Field name=\"name\" as={TextField} label=\"Name\"/>\n                                                <ErrorMessage name=\"name\" />\n                                            </FormGroup>\n                                        </Box>\n                                        <Button size=\"small\"\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                type=\"submit\" disabled={isSubmitting}>SUBMIT</Button>\n                                        <Button\n                                            size=\"small\"\n                                            variant=\"outlined\"\n                                            color=\"default\"\n                                            type=\"submit\"\n                                            onClick={handleClose}\n                                            disabled={isLoading}\n                                        >CANCEL</Button>\n                                    </Form>\n                                )}\n                            </Formik>\n                            :\n                            <>\n                                <Button\n                                    size=\"small\"\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    onClick={handleRemoveInModal}\n                                    startIcon={isLoading ? <CircularProgress size=\"1rem\" /> : null}\n                                    disabled={isLoading}\n                                >REMOVE</Button>\n                                <Button\n                                    size=\"small\"\n                                    variant=\"outlined\"\n                                    color=\"default\"\n                                    type=\"submit\"\n                                    onClick={handleClose}\n                                    disabled={isLoading}\n                                >CANCEL</Button>\n                            </>\n                        }\n                    </div>\n                </Fade>\n            </Modal>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}