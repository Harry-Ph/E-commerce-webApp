{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport useStyles from \"./style\";\nimport { Card, CardMedia, CardContent, Typography, CardActionArea, CardActions, Button } from \"@material-ui/core\";\nimport Loading from \"../../components/Loading\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport PaginationItem from \"@material-ui/lab/PaginationItem\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Box from \"@material-ui/core/Box\";\n// import { request } from \"graphql-request\";\nimport useSWR from \"swr\";\nimport CustomModal from '../../components/Modal';\nimport Router from \"next/router\";\nimport LazyLoad from 'react-lazyload';\nvar take = \"9\"; // const API = \"http://localhost:3000/api/graphql\";\n// const fetcher = (query: any, skip: string, take: string) =>\n//   request(API, query, { skip, take });\n\nvar ALL_PRODUCTS2 =\n/* GraphQL */\n\"\\n  query allProducts($skip: String!, $take: String!) {\\n    allProducts(skip: $skip, take: $take) {\\n      id\\n      name\\n    }\\n  }\\n\";\nexport var __N_SSG = true;\nexport default function Products(_ref) {\n  var skip = _ref.skip,\n      products = _ref.products,\n      numberPages = _ref.numberPages;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(false),\n      openEdit = _useState2[0],\n      setOpenEdit = _useState2[1];\n\n  var _useState3 = useState(),\n      activeProduct = _useState3[0],\n      setActiveProduct = _useState3[1];\n\n  var _useSWR = useSWR([ALL_PRODUCTS2, skip, take], {\n    initialData: products\n  }),\n      data = _useSWR.data;\n\n  var loading = !data;\n  var router = useRouter();\n\n  if (router.isFallback || loading) {\n    return __jsx(Loading, null);\n  }\n\n  var handleOnclickDeleteBtn = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(product, e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return handleOpen(e);\n\n            case 2:\n              _context.next = 4;\n              return setActiveProduct(product);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleOnclickDeleteBtn(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var redirectRouting = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(currentPage) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return Router.replace(\"/products/\".concat(currentPage), \"/products/\".concat(currentPage), {\n                shallow: true\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function redirectRouting(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleOpen = function handleOpen(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(false);\n  };\n\n  var handleOpenOrCloseEdit = function handleOpenOrCloseEdit(e) {\n    e.preventDefault();\n    setOpenEdit(!openEdit);\n  }; // @ts-ignore\n\n\n  var updatedProducts = [];\n  var typeOfUpdateProducts = typeof data;\n\n  if (typeOfUpdateProducts === \"object\") {\n    // @ts-ignore\n    updatedProducts = (data === null || data === void 0 ? void 0 : data.allProducts) || undefined;\n  }\n\n  return __jsx(\"div\", {\n    className: classes.wrapper\n  }, open && activeProduct && __jsx(CustomModal, {\n    handleOpen: handleOpen,\n    product: activeProduct,\n    handleClose: handleClose,\n    open: open,\n    redirectRouting: redirectRouting,\n    currentPage: router.query.page || 1,\n    isEdit: false // @ts-ignore\n    ,\n    products: productArray || products || []\n  }), openEdit ? __jsx(CustomModal, {\n    redirectRouting: redirectRouting,\n    product: activeProduct,\n    currentPage: router.query.page || 1,\n    handleClose: handleOpenOrCloseEdit,\n    handleOpen: handleOpenOrCloseEdit,\n    open: openEdit,\n    isEdit: true // @ts-ignore\n    ,\n    products: productArray || products || []\n  }) : null, __jsx(\"div\", {\n    className: classes.content__tittle\n  }, __jsx(\"div\", null, \"POPULAR PRODUCTS\")), __jsx(Box, {\n    className: classes.content__pagination\n  }, numberPages > 0 || !router.isFallback ? __jsx(Pagination, {\n    page: parseInt(router.query.page || \"1\"),\n    count: numberPages,\n    defaultPage: 1,\n    renderItem: function renderItem(item) {\n      return __jsx(PaginationItem, _extends({\n        component: MaterialUiLink,\n        query: router.query || 1,\n        item: item\n      }, item));\n    }\n  }) : __jsx(Skeleton, {\n    variant: \"rect\",\n    width: \"30vw\",\n    height: \"28px\"\n  })), __jsx(\"div\", {\n    className: classes.content__items\n  }, updatedProducts ? updatedProducts.map(function (p, i) {\n    return __jsx(Box, {\n      className: classes.lazyLoading\n    }, __jsx(LazyLoad, {\n      key: p.id,\n      height: 9,\n      offset: [-9, 9],\n      placeholder: __jsx(Loading, null)\n    }, __jsx(Link, {\n      href: \"/products/details/[id]\",\n      as: \"/products/details/\".concat(p.id)\n    }, __jsx(Card, {\n      key: i,\n      className: classes.content__item\n    }, __jsx(CardActionArea, null, __jsx(CardMedia, {\n      className: classes.item__media,\n      image: \"https://cdn.bike24.net/i/mb/d8/fa/b2/277893-00-d-557791.jpg\",\n      title: \"Contemplative Reptile\"\n    }), __jsx(CardContent, null, __jsx(Typography, {\n      gutterBottom: true,\n      variant: \"h5\",\n      component: \"h2\"\n    }, p.name), __jsx(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\"\n    }, \"Maximum impact cushioning. The brutal, repetitive, downward force of sport can wreak havoc on the body and on performance. Max Air cushioning is specifically engineered to handle these impacts and provide protection. Max Air is big air designed to take a pounding.\"), __jsx(Typography, {\n      className: classes.item__price\n    }, \"PRICE: 60.0 Euro\"))), __jsx(CardActions, {\n      className: classes.item__buttons\n    }, __jsx(Box, {\n      component: \"div\"\n    }, __jsx(Button, {\n      size: \"small\",\n      color: \"primary\",\n      className: classes.button__addToCart\n    }, \"Add To Cart\"), __jsx(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: handleOpenOrCloseEdit\n    }, \"EDIT\")), __jsx(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: function onClick(e) {\n        return handleOnclickDeleteBtn(p, e);\n      }\n    }, \"Delete\"))))));\n  }) : __jsx(Box, {\n    className: classes.content__skeleton\n  }, __jsx(Skeleton, {\n    variant: \"rect\",\n    width: \"28vw\",\n    height: \"720px\"\n  }), __jsx(\"div\", {\n    className: classes.wrapper__loading\n  }, __jsx(Loading, null)))));\n}\nexport function MaterialUiLink(_ref4) {\n  var item = _ref4.item,\n      query = _ref4.query,\n      props = _objectWithoutProperties(_ref4, [\"item\", \"query\"]);\n\n  // const router = useRouter();\n  // if ( !router.query.page)\n  //   return (\n  //     <Link href=\"/products\" as={`/products`}>\n  //       <a {...props}></a>\n  //     </Link>\n  //   );\n  return __jsx(Link, {\n    href: \"/products/[page]\",\n    as: \"/products/\".concat(item.page)\n  }, __jsx(\"a\", props));\n}","map":null,"metadata":{},"sourceType":"module"}