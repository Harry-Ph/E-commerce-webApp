{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/pages/products/[page].tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    query allProducts($skip: String!, $take: String!) {\\n        allProducts(skip: $skip, take: $take) {\\n            id\\n            name\\n        }\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport useStyles from \"./style\";\nimport { Card, CardMedia, CardContent, Typography, CardActionArea, CardActions, Button } from \"@material-ui/core\";\nimport Loading from \"../../components/Loading\";\nimport { gql } from \"@apollo/client\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport PaginationItem from \"@material-ui/lab/PaginationItem\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Box from \"@material-ui/core/Box\";\nimport useSWR from \"swr\";\nimport Modal from '../../components/Modal';\nvar take = \"3\";\nvar ALL_PRODUCTS = gql(_templateObject());\nvar ALL_PRODUCTS2 =\n/* GraphQL */\n\"\\n  query allProducts($skip: String!, $take: String!) {\\n    allProducts(skip: $skip, take: $take) {\\n      id\\n      name\\n    }\\n  }\\n\";\n/* GraphQL */\n\nvar CREATE_PRODUCT2 =\n/* GraphQL */\n\"\\n  mutation createNewOneProduct($name: String!) {\\n    createNewOneProduct(name: $name) {\\n      id\\n      name\\n    }\\n  }\\n\";\nexport var __N_SSG = true;\nexport default function Products(_ref) {\n  _s();\n\n  var _this = this;\n\n  var skip = _ref.skip,\n      products = _ref.products,\n      numberPages = _ref.numberPages;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(),\n      activeProduct = _useState2[0],\n      setActiveProduct = _useState2[1];\n\n  var _useSWR = useSWR([ALL_PRODUCTS2, skip, take], {\n    initialData: products\n  }),\n      data = _useSWR.data;\n\n  var updatedProducts = data || [];\n  var loading = !data;\n  var router = useRouter();\n\n  if (router.isFallback || loading) {\n    return __jsx(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 12\n      }\n    });\n  }\n\n  var handleOpen = function handleOpen(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(false);\n  };\n\n  var productArray = Object.keys(updatedProducts).map(function (k) {\n    return updatedProducts[k];\n  })[0];\n  return __jsx(\"div\", {\n    className: classes.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, open && activeProduct && __jsx(Modal, {\n    handleOpen: handleOpen,\n    product: activeProduct,\n    handleClose: handleClose,\n    open: open,\n    currentPage: router.query.page,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 26\n    }\n  }), __jsx(\"div\", {\n    className: classes.content__tittle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, \"POPULAR PRODUCTS\")), __jsx(Box, {\n    className: classes.content__pagination,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, numberPages > 0 || !router.isFallback ? __jsx(Pagination, {\n    page: parseInt(router.query.page || \"1\"),\n    count: numberPages,\n    defaultPage: 1,\n    renderItem: function renderItem(item) {\n      return __jsx(PaginationItem, _extends({\n        component: MaterialUiLink,\n        query: router.query,\n        item: item\n      }, item, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }) : __jsx(Skeleton, {\n    variant: \"rect\",\n    width: \"30vw\",\n    height: \"28px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: classes.content__items,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, products && products.length > 0 || !router.isFallback ? productArray === null || productArray === void 0 ? void 0 : productArray.map(function (p, i) {\n    return __jsx(Link, {\n      href: \"/products/details/[id]\",\n      as: \"/products/details/\".concat(p.id),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, __jsx(Card, {\n      key: i,\n      className: classes.content__item,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, __jsx(CardActionArea, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, __jsx(CardMedia, {\n      className: classes.item__media,\n      image: \"https://cdn.bike24.net/i/mb/d8/fa/b2/277893-00-d-557791.jpg\",\n      title: \"Contemplative Reptile\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }), __jsx(CardContent, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, __jsx(Typography, {\n      gutterBottom: true,\n      variant: \"h5\",\n      component: \"h2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 23\n      }\n    }, p === null || p === void 0 ? void 0 : p.name), __jsx(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 23\n      }\n    }, \"Maximum impact cushioning. The brutal, repetitive, downward force of sport can wreak havoc on the body and on performance. Max Air cushioning is specifically engineered to handle these impacts and provide protection. Max Air is big air designed to take a pounding.\"), __jsx(Typography, {\n      className: classes.item__price,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 23\n      }\n    }, \"PRICE: 60.0 Euro\"))), __jsx(CardActions, {\n      className: classes.item__buttons,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, __jsx(Box, {\n      component: \"div\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, __jsx(Button, {\n      size: \"small\",\n      color: \"primary\",\n      className: classes.button__addToCart,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 23\n      }\n    }, \"Add To Cart\"), __jsx(Button, {\n      size: \"small\",\n      color: \"primary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 23\n      }\n    }, \"Learn More\")), __jsx(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return handleOpen(e);\n\n                case 2:\n                  _context.next = 4;\n                  return setActiveProduct(p);\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }, \"Delete\"))));\n  }) : __jsx(Box, {\n    className: classes.content__skeleton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, __jsx(Skeleton, {\n    variant: \"rect\",\n    width: \"28vw\",\n    height: \"720px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: classes.wrapper__loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, __jsx(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  })))));\n}\n\n_s(Products, \"xiueh50k0vEPlurv1IFBGaQXg8s=\", false, function () {\n  return [useStyles, useSWR, useRouter];\n});\n\n_c = Products;\nexport function MaterialUiLink(_ref3) {\n  var item = _ref3.item,\n      query = _ref3.query,\n      props = _objectWithoutProperties(_ref3, [\"item\", \"query\"]);\n\n  return __jsx(Link, {\n    href: \"/products/[page]\",\n    as: \"/products/\".concat(item.page),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 5\n    }\n  }, __jsx(\"a\", _extends({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }\n  })));\n}\n_c2 = MaterialUiLink;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Products\");\n$RefreshReg$(_c2, \"MaterialUiLink\");","map":{"version":3,"sources":["/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/pages/products/[page].tsx"],"names":["React","useState","useStyles","Card","CardMedia","CardContent","Typography","CardActionArea","CardActions","Button","Loading","gql","Link","useRouter","Pagination","PaginationItem","Skeleton","Box","useSWR","Modal","take","ALL_PRODUCTS","ALL_PRODUCTS2","CREATE_PRODUCT2","Products","skip","products","numberPages","classes","open","setOpen","activeProduct","setActiveProduct","initialData","data","updatedProducts","loading","router","isFallback","handleOpen","e","preventDefault","stopPropagation","handleClose","productArray","Object","keys","map","k","wrapper","query","page","content__tittle","content__pagination","parseInt","item","MaterialUiLink","content__items","length","p","i","id","content__item","item__media","name","item__price","item__buttons","button__addToCart","content__skeleton","wrapper__loading","props"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport useStyles from \"./style\";\nimport { PaginationRenderItemParams } from \"@material-ui/lab\";\nimport {\n  Card,\n  CardMedia,\n  CardContent,\n  Typography,\n  CardActionArea,\n  CardActions,\n  Button,\n  Backdrop,\n  Fade,\n} from \"@material-ui/core\";\nimport { GetStaticPaths, GetStaticProps } from \"next\";\nimport Loading from \"../../components/Loading\";\nimport { gql } from \"@apollo/client\";\nimport client from \"../apollo\";\nimport { Product } from \"../../interfaces\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport PaginationItem from \"@material-ui/lab/PaginationItem\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Box from \"@material-ui/core/Box\";\nimport { ParsedUrlQuery } from \"querystring\";\nimport { PrismaClient } from \"@prisma/client\";\nimport { request } from \"graphql-request\";\nimport useSWR, { mutate, trigger } from \"swr\";\nconst prisma2 = new PrismaClient();\nimport Modal from '../../components/Modal';\nimport Router from \"next/router\";\n\nconst take = \"3\";\n\nconst API = \"http://localhost:3000/api/graphql\";\nconst fetcher = (query: any, skip: string, take: string) =>\n  request(API, query, { skip, take });\n\nconst ALL_PRODUCTS = gql`\n    query allProducts($skip: String!, $take: String!) {\n        allProducts(skip: $skip, take: $take) {\n            id\n            name\n        }\n    }\n`;\n\nconst ALL_PRODUCTS2 = /* GraphQL */ `\n  query allProducts($skip: String!, $take: String!) {\n    allProducts(skip: $skip, take: $take) {\n      id\n      name\n    }\n  }\n`;\n\n/* GraphQL */\nconst CREATE_PRODUCT2 = /* GraphQL */ `\n  mutation createNewOneProduct($name: String!) {\n    createNewOneProduct(name: $name) {\n      id\n      name\n    }\n  }\n`;\n\nexport interface IProducts {\n  products: Product[];\n  numberPages: number;\n  skip: string;\n}\n\nexport default function Products({ skip, products, numberPages }: IProducts) {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [activeProduct, setActiveProduct] = useState<Product>();\n\n  const { data } = useSWR([ALL_PRODUCTS2, skip, take], {\n    initialData: products,\n  });\n  const updatedProducts: Product[] = data! || [];\n  const loading: boolean = !data;\n\n  const router = useRouter();\n  if (router.isFallback || loading) {\n    return <Loading />;\n  }\n\n\n  const handleOpen = (e: any) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(true);\n  };\n\n  const handleClose = (e: any) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(false);\n  };\n\n  const productArray = Object.keys(updatedProducts).map(\n    (k) => updatedProducts[k]\n  )[0];\n\n\n  return (\n    <div className={classes.wrapper}>\n      {/* Break component ===>  */}\n      {open && (\n        activeProduct && <Modal\n            handleOpen={handleOpen}\n            product={activeProduct!}\n            handleClose={handleClose}\n            open={open}\n            currentPage= {router.query.page as string}\n        />\n\n      )}\n      <div className={classes.content__tittle}>\n        <div>POPULAR PRODUCTS</div>\n      </div>\n      <Box className={classes.content__pagination}>\n        {numberPages > 0 || !router.isFallback ? (\n          <Pagination\n            page={parseInt((router.query.page as string) || \"1\")}\n            count={numberPages}\n            defaultPage={1}\n            renderItem={(item) => (\n              <PaginationItem\n                component={MaterialUiLink}\n                query={router.query}\n                item={item}\n                {...item}\n              />\n            )}\n          />\n        ) : (\n          <Skeleton variant=\"rect\" width={\"30vw\"} height={\"28px\"} />\n        )}\n      </Box>\n      <div className={classes.content__items}>\n        {(products && products.length > 0) || !router.isFallback ? (\n          productArray?.map((p, i) => {\n            return (\n              <Link\n                href=\"/products/details/[id]\"\n                as={`/products/details/${p.id}`}\n              >\n                <Card key={i} className={classes.content__item}>\n                  <CardActionArea>\n                    <CardMedia\n                      className={classes.item__media}\n                      image=\"https://cdn.bike24.net/i/mb/d8/fa/b2/277893-00-d-557791.jpg\"\n                      title=\"Contemplative Reptile\"\n                    />\n                    <CardContent>\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                        {p?.name}\n                      </Typography>\n                      <Typography\n                        variant=\"body2\"\n                        color=\"textSecondary\"\n                        component=\"p\"\n                      >\n                        Maximum impact cushioning. The brutal, repetitive,\n                        downward force of sport can wreak havoc on the body and\n                        on performance. Max Air cushioning is specifically\n                        engineered to handle these impacts and provide\n                        protection. Max Air is big air designed to take a\n                        pounding.\n                      </Typography>\n                      <Typography className={classes.item__price}>\n                        PRICE: 60.0 Euro\n                      </Typography>\n                    </CardContent>\n                  </CardActionArea>\n                  <CardActions className={classes.item__buttons}>\n                    <Box component=\"div\">\n                      <Button\n                        size=\"small\"\n                        color=\"primary\"\n                        className={classes.button__addToCart}\n                      >\n                        Add To Cart\n                      </Button>\n                      <Button size=\"small\" color=\"primary\">\n                        Learn More\n                      </Button>\n                    </Box>\n                    {/* Set active product ===> nhu */}\n                    <Button\n                      size=\"small\"\n                      color=\"primary\"\n                      onClick={async (e) => {\n                        await handleOpen(e);// Active product. ...\n                        await setActiveProduct(p);\n                      }}\n                    >\n                      Delete\n                    </Button>\n                  </CardActions>\n                </Card>\n              </Link>\n            );\n          })\n        ) : (\n          <Box className={classes.content__skeleton}>\n            <Skeleton variant=\"rect\" width={\"28vw\"} height={\"720px\"} />\n            <div className={classes.wrapper__loading}>\n              <Loading />\n            </div>\n          </Box>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport const getStaticProps: GetStaticProps = async (ctx) => {\n  const totalProducts = await prisma2.product.findMany();\n  const productsArray = Object.keys(totalProducts).map(\n    (k) => totalProducts[parseInt(k)]\n  );\n  const numberPages = Math.ceil(\n    ((productsArray?.length || 0) as number) / +take\n  ) as number;\n  const pageQuery = (ctx?.params?.page || 1) as string;\n\n  const skip = String((parseInt(pageQuery) - 1) * +take);\n\n  // const {  data } = await client.query({\n  //   query: ALL_PRODUCTS,\n  //   variables: {\n  //     skip: skip,\n  //     take: take\n  //   }\n  // })\n\n  const products = await fetcher(ALL_PRODUCTS2, skip, take);\n\n  // const products = Object.keys(data).map((k) => data[k])[0]\n  // console.log(' server build...', data)\n  //   const deleteItem = await fetcher(REMOVE_PRODUCT_BY_ID, skip, take);\n  // console.log('deleteItem:', deleteItem);\n  return {\n    props: {\n      products,\n      numberPages,\n      skip,\n    },\n  };\n};\n\nexport const getStaticPaths: GetStaticPaths<{ page: string }> = async () => {\n  return {\n    paths: [\n      { params: { page: \"1\" } },\n      { params: { page: \"2\" } },\n      { params: { page: \"3\" } },\n    ],\n    fallback: true,\n  };\n};\n\nexport interface MaterialUiLinkProps {\n  item: PaginationRenderItemParams;\n  query: ParsedUrlQuery;\n}\n\nexport function MaterialUiLink({ item, query, ...props }: MaterialUiLinkProps) {\n  return (\n    <Link href=\"/products/[page]\" as={`/products/${item.page}`}>\n      <a {...props}></a>\n    </Link>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}