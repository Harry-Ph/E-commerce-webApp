{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/pages/products/create.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    query allProducts($skip: String!, $take: String!) {\\n        allProducts(skip: $skip, take: $take) {\\n            id\\n            name\\n        }\\n    }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    mutation createNewOneProduct($name: String!) {\\n        createNewOneProduct(name: $name) {\\n            id\\n            name\\n        }\\n    }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    query product($queryStr: String!) {\\n        product(queryStr: $queryStr) {\\n            id\\n            name\\n        }\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Box, Button, Card, CardContent, CircularProgress, Grid, MenuItem, Step, StepLabel, Stepper } from '@material-ui/core';\nimport { Field, Form, Formik } from 'formik';\nimport { CheckboxWithLabel, TextField } from 'formik-material-ui';\nimport React, { useState } from 'react';\nimport { mixed, number, object, string } from 'yup';\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport { Select } from 'formik-material-ui';\nimport { gql } from \"@apollo/client\";\nimport { request } from \"graphql-request\";\nimport { mutate } from 'swr';\nvar API = 'http://localhost:3000/api/graphql';\n\nvar sleep = function sleep(time) {\n  return new Promise(function (acc) {\n    return setTimeout(acc, time);\n  });\n};\n\nvar DETAIL_PRODUCT = gql(_templateObject());\nvar CREATE_PRODUCT = gql(_templateObject2());\n/* GraphQL */\n\nvar CREATE_PRODUCT2 =\n/* GraphQL */\n\"\\n    mutation createNewOneProduct($name: String!) {\\n        createNewOneProduct(name: $name) {\\n            id\\n            name\\n        }\\n    }\\n\";\nvar ALL_PRODUCTS = gql(_templateObject3());\nexport default function CreateProduct() {\n  _s();\n\n  var _useState = useState(''),\n      name = _useState[0],\n      setName = _useState[1]; // const [addProduct] = useMutation(CREATE_PRODUCT);\n  // the mutate function will do the refetching for us\n  // const { mutate } = useSWR(CREATE_PRODUCT2);\n\n\n  return __jsx(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, __jsx(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, __jsx(FormikStepper, {\n    initialValues: {\n      name: '',\n      brand: 'Other',\n      isAvailable: false,\n      money: 0,\n      description: ''\n    },\n    onSubmit: /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n        var _yield$request, productData;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return sleep(2000);\n\n              case 2:\n                console.log('values', values);\n                _context.next = 5;\n                return setName(values.name);\n\n              case 5:\n                _context.next = 7;\n                return request(API, CREATE_PRODUCT2, {\n                  name: values.name\n                });\n\n              case 7:\n                _yield$request = _context.sent;\n                productData = _yield$request.productData;\n                console.log('data check', productData); // trigger(API);\n\n                mutate(API); // const productData = await addProduct({  variables: {\n                //     name: values!.name\n                //   } });\n                // await Router.push(`/products/details/${data!.createNewOneProduct.id}`);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, __jsx(FormikStep, {\n    label: \"Data Info\",\n    validationSchema: object({\n      name: string().required().min(3).max(100)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, __jsx(Box, {\n    paddingBottom: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, __jsx(Field, {\n    fullWidth: true,\n    name: \"name\",\n    component: TextField,\n    label: \"Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  })), __jsx(Box, {\n    paddingBottom: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, __jsx(Field, {\n    name: \"brand\",\n    component: Select,\n    label: \"Brand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, __jsx(MenuItem, {\n    value: \"Nike\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"Nike\"), __jsx(MenuItem, {\n    value: \"Adidas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, \"Adidas\"), __jsx(MenuItem, {\n    value: \"Puma\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"Puma\"), __jsx(MenuItem, {\n    value: \"Gucci\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, \"Gucci\"), __jsx(MenuItem, {\n    value: \"Dior\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, \"Dior\"), __jsx(MenuItem, {\n    value: \"Nana\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, \"Nana\"), __jsx(MenuItem, {\n    defaultChecked: true,\n    value: \"Other\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, \"Other\")))), __jsx(Box, {\n    paddingBottom: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, __jsx(Field, {\n    name: \"isAvailable\",\n    type: \"checkbox\",\n    component: CheckboxWithLabel,\n    Label: {\n      label: 'Is product still available?'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }))), __jsx(FormikStep, {\n    label: \"Price\",\n    validationSchema: object({\n      money: mixed().when('isAvailable', {\n        is: true,\n        then: number().required().min(0, 'The min-price of product is 0 eur'),\n        otherwise: number().required()\n      })\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, __jsx(Box, {\n    paddingBottom: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, __jsx(Field, {\n    fullWidth: true,\n    name: \"money\",\n    type: \"number\",\n    component: TextField,\n    label: \"All the money I have\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }))), __jsx(FormikStep, {\n    label: \"More Info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }, __jsx(Box, {\n    paddingBottom: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, __jsx(Field, {\n    fullWidth: true,\n    name: \"description\",\n    component: TextField,\n    label: \"Description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }))))));\n}\n\n_s(CreateProduct, \"/PAWDgWx7+Y6BmsFMUKcdrcX5eM=\");\n\n_c = CreateProduct;\nexport function FormikStep(_ref2) {\n  var children = _ref2.children;\n  return __jsx(React.Fragment, null, children);\n}\n_c2 = FormikStep;\nexport function FormikStepper(_ref3) {\n  _s2();\n\n  var _this = this;\n\n  var children = _ref3.children,\n      props = _objectWithoutProperties(_ref3, [\"children\"]);\n\n  var childrenArray = React.Children.toArray(children);\n\n  var _useState2 = useState(0),\n      step = _useState2[0],\n      setStep = _useState2[1];\n\n  var currentChild = childrenArray[step];\n\n  var _useState3 = useState(false),\n      completed = _useState3[0],\n      setCompleted = _useState3[1];\n\n  function isLastStep() {\n    return step === childrenArray.length - 1;\n  }\n\n  return __jsx(Formik, _extends({}, props, {\n    validationSchema: currentChild.props.validationSchema,\n    onSubmit: /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values, helpers) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!isLastStep()) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 3;\n                return props.onSubmit(values, helpers);\n\n              case 3:\n                setCompleted(true);\n                _context2.next = 7;\n                break;\n\n              case 6:\n                setStep(function (s) {\n                  return s + 1;\n                });\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2, _x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 5\n    }\n  }), function (_ref5) {\n    var isSubmitting = _ref5.isSubmitting;\n    return __jsx(Form, {\n      autoComplete: \"off\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }\n    }, __jsx(Stepper, {\n      alternativeLabel: true,\n      activeStep: step,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }\n    }, childrenArray.map(function (child, index) {\n      return __jsx(Step, {\n        key: child.props.label,\n        completed: step > index || completed,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }\n      }, __jsx(StepLabel, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 17\n        }\n      }, child.props.label));\n    })), currentChild, __jsx(Grid, {\n      container: true,\n      spacing: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }\n    }, step > 0 ? __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 15\n      }\n    }, __jsx(Button, {\n      disabled: isSubmitting,\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: function onClick() {\n        return setStep(function (s) {\n          return s - 1;\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }\n    }, \"Back\")) : null, __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }, __jsx(Button, {\n      startIcon: isSubmitting ? __jsx(CircularProgress, {\n        size: \"1rem\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 43\n        }\n      }) : null,\n      disabled: isSubmitting,\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 15\n      }\n    }, isSubmitting ? 'Submitting' : isLastStep() ? 'Submit' : 'Next'))));\n  });\n}\n\n_s2(FormikStepper, \"ofStvXvE4s5zSVpZTDgv2Qwx0Xo=\");\n\n_c3 = FormikStepper;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"CreateProduct\");\n$RefreshReg$(_c2, \"FormikStep\");\n$RefreshReg$(_c3, \"FormikStepper\");","map":{"version":3,"sources":["/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/pages/products/create.tsx"],"names":["Box","Button","Card","CardContent","CircularProgress","Grid","MenuItem","Step","StepLabel","Stepper","Field","Form","Formik","CheckboxWithLabel","TextField","React","useState","mixed","number","object","string","FormGroup","Select","gql","request","mutate","API","sleep","time","Promise","acc","setTimeout","DETAIL_PRODUCT","CREATE_PRODUCT","CREATE_PRODUCT2","ALL_PRODUCTS","CreateProduct","name","setName","brand","isAvailable","money","description","values","console","log","productData","required","min","max","label","when","is","then","otherwise","FormikStep","children","FormikStepper","props","childrenArray","Children","toArray","step","setStep","currentChild","completed","setCompleted","isLastStep","length","validationSchema","helpers","onSubmit","s","isSubmitting","map","child","index"],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  CircularProgress,\n  Grid,\n  MenuItem,\n  Step,\n  StepLabel,\n  Stepper\n} from '@material-ui/core';\nimport { Field, Form, Formik, FormikConfig, FormikValues } from 'formik';\nimport { CheckboxWithLabel, TextField } from 'formik-material-ui';\nimport React, { useState } from 'react';\nimport {mixed, number, object, string} from 'yup';\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport { Select } from 'formik-material-ui';\nimport {gql, useMutation} from \"@apollo/client\";\nimport {request} from \"graphql-request\";\nimport useSWR , {trigger, mutate }from 'swr'\nimport Router from \"next/router\";\nconst API = 'http://localhost:3000/api/graphql'\n\nconst sleep = (time) => new Promise((acc) => setTimeout(acc, time));\n\nconst DETAIL_PRODUCT = gql`\n    query product($queryStr: String!) {\n        product(queryStr: $queryStr) {\n            id\n            name\n        }\n    }\n`\n\nconst CREATE_PRODUCT = gql`\n    mutation createNewOneProduct($name: String!) {\n        createNewOneProduct(name: $name) {\n            id\n            name\n        }\n    }\n`\n\n/* GraphQL */\nconst CREATE_PRODUCT2 = /* GraphQL */`\n    mutation createNewOneProduct($name: String!) {\n        createNewOneProduct(name: $name) {\n            id\n            name\n        }\n    }\n`\n\nconst ALL_PRODUCTS = gql`\n    query allProducts($skip: String!, $take: String!) {\n        allProducts(skip: $skip, take: $take) {\n            id\n            name\n        }\n    }\n`\n\nexport default function CreateProduct() {\n  const [name, setName] = useState('');\n  // const [addProduct] = useMutation(CREATE_PRODUCT);\n\n  // the mutate function will do the refetching for us\n  // const { mutate } = useSWR(CREATE_PRODUCT2);\n\n  return (\n    <Card>\n      <CardContent>\n        <FormikStepper\n          initialValues={{\n            name: '',\n            brand: 'Other',\n            isAvailable: false,\n            money: 0,\n            description: '',\n          }}\n          onSubmit={async (values) => {\n            await sleep(2000);\n            console.log('values', values);\n            await setName(values!.name)\n            // try {\n            //   const {data} = await client.query({\n            //     query: CREATE_PRODUCT,\n            //     variables: {\n            //       name: 'test hang'\n            //     }\n            //   })\n            //   // const {  data } = await client.query({\n            //   //   query: ALL_PRODUCTS,\n            //   //   variables: {\n            //   //     skip: 0,\n            //   //     take: 10\n            //   //   }\n            //   // })\n            //   console.log('dataaaa ne-> ', data)\n            // } catch (e) {\n            //   throw new Error(e)\n            //   console.log(e)\n            // }\n\n\n            // const {data} = await client.query({\n            //   query: CREATE_PRODUCT,\n            //   variables: {\n            //     name: 'test hang'\n            //   }\n            // })\n\n            // call mutate here to refetch products after clicking\n\n            const {productData} = await request(API, CREATE_PRODUCT2, {name: values!.name})\n            console.log('data check', productData)\n            // trigger(API);\n            mutate(API);\n            // const productData = await addProduct({  variables: {\n            //     name: values!.name\n            //   } });\n\n            // await Router.push(`/products/details/${data!.createNewOneProduct.id}`);\n          }}\n        >\n          <FormikStep\n            label=\"Data Info\"\n            validationSchema={\n              object({\n                name: string().required().min(3).max(100),\n              })\n            }\n          >\n            <Box paddingBottom={2}>\n              <Field fullWidth name=\"name\" component={TextField} label=\"Name\" />\n            </Box>\n            <Box paddingBottom={2}>\n              <FormGroup>\n                <Field name=\"brand\" component={Select} label=\"Brand\">\n                  <MenuItem value=\"Nike\">Nike</MenuItem>\n                  <MenuItem value=\"Adidas\">Adidas</MenuItem>\n                  <MenuItem value=\"Puma\">Puma</MenuItem>\n                  <MenuItem value=\"Gucci\">Gucci</MenuItem>\n                  <MenuItem value=\"Dior\">Dior</MenuItem>\n                  <MenuItem value=\"Nana\">Nana</MenuItem>\n                  <MenuItem defaultChecked={true} value=\"Other\">Other</MenuItem>\n                </Field>\n              </FormGroup>\n            </Box>\n            <Box paddingBottom={2}>\n              <Field\n                name=\"isAvailable\"\n                type=\"checkbox\"\n                component={CheckboxWithLabel}\n                Label={{ label: 'Is product still available?' }}\n              />\n            </Box>\n          </FormikStep>\n          <FormikStep\n            label=\"Price\"\n            validationSchema={object({\n              money: mixed().when('isAvailable', {\n                is: true,\n                then: number()\n                  .required()\n                  .min(\n                    0,\n                    'The min-price of product is 0 eur'\n                  ),\n                otherwise: number().required(),\n              }),\n            })}\n          >\n            <Box paddingBottom={2}>\n              <Field\n                fullWidth\n                name=\"money\"\n                type=\"number\"\n                component={TextField}\n                label=\"All the money I have\"\n              />\n            </Box>\n          </FormikStep>\n          <FormikStep label=\"More Info\">\n            <Box paddingBottom={2}>\n              <Field fullWidth name=\"description\" component={TextField} label=\"Description\" />\n            </Box>\n          </FormikStep>\n        </FormikStepper>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport interface FormikStepProps\n  extends Pick<FormikConfig<FormikValues>, 'children' | 'validationSchema'> {\n  label: string;\n}\n\nexport function FormikStep({ children }: FormikStepProps) {\n  return <>{children}</>;\n}\n\nexport function FormikStepper({ children, ...props }: FormikConfig<FormikValues>) {\n  const childrenArray = React.Children.toArray(children) as React.ReactElement<FormikStepProps>[];\n  const [step, setStep] = useState(0);\n  const currentChild = childrenArray[step];\n  const [completed, setCompleted] = useState(false);\n\n  function isLastStep() {\n    return step === childrenArray.length - 1;\n  }\n\n  return (\n    <Formik\n      {...props}\n      validationSchema={currentChild.props.validationSchema}\n      onSubmit={async (values, helpers) => {\n        if (isLastStep()) {\n          await props.onSubmit(values, helpers);\n          setCompleted(true);\n        } else {\n          setStep((s) => s + 1);\n        }\n      }}\n    >\n      {({ isSubmitting }) => (\n        <Form autoComplete=\"off\">\n          <Stepper alternativeLabel activeStep={step}>\n            {childrenArray.map((child, index) => (\n              <Step key={child.props.label} completed={step > index || completed}>\n                <StepLabel>{child.props.label}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n\n          {currentChild}\n\n          <Grid container spacing={2}>\n            {step > 0 ? (\n              <Grid item>\n                <Button\n                  disabled={isSubmitting}\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={() => setStep((s) => s - 1)}\n                >\n                  Back\n                </Button>\n              </Grid>\n            ) : null}\n            <Grid item>\n              <Button\n                startIcon={isSubmitting ? <CircularProgress size=\"1rem\" /> : null}\n                disabled={isSubmitting}\n                variant=\"contained\"\n                color=\"primary\"\n                type=\"submit\"\n              >\n                {isSubmitting ? 'Submitting' : isLastStep() ? 'Submit' : 'Next'}\n              </Button>\n            </Grid>\n          </Grid>\n        </Form>\n      )}\n    </Formik>\n  );\n}"]},"metadata":{},"sourceType":"module"}