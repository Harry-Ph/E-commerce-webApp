{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/pages/products/[page].tsx\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    query allProducts($skip: String!, $take: String!) {\\n        allProducts(skip: $skip, take: $take) {\\n            id\\n            name\\n        }\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport useStyles from './style';\nimport { Card, CardMedia, CardContent, Typography, CardActionArea, CardActions, Button } from '@material-ui/core';\nimport Loading from \"../../components/Loading\";\nimport { gql } from \"@apollo/client\";\nimport client from \"../apollo\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport PaginationItem from '@material-ui/lab/PaginationItem';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport Box from '@material-ui/core/Box';\nvar ALL_PRODUCTS = gql(_templateObject());\nexport var __N_SSG = true;\nexport default function Products(_x) {\n  return _Products.apply(this, arguments);\n}\n_c2 = Products;\n\nfunction _Products() {\n  var _s = $RefreshSig$();\n\n  _Products = _asyncToGenerator(_s( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var _this = this;\n\n    var products, data, numberPages, classes, localCache, router;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _s();\n\n            products = _ref.products, data = _ref.data, numberPages = _ref.numberPages;\n            classes = useStyles();\n            _context.next = 5;\n            return client.readQuery({\n              query: ALL_PRODUCTS,\n              variables: {\n                skip: first,\n                take: take\n              }\n            });\n\n          case 5:\n            localCache = _context.sent;\n            console.log(' comp localCache', localCache);\n            router = useRouter(); // if( router.isFallback || !products) {\n            //   return <Loading/>\n            // }\n\n            return _context.abrupt(\"return\", __jsx(\"div\", {\n              className: classes.wrapper,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 53,\n                columnNumber: 5\n              }\n            }, __jsx(\"div\", {\n              className: classes.content__tittle,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 7\n              }\n            }, __jsx(\"div\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 9\n              }\n            }, \"POPULAR PRODUCTS\")), __jsx(Box, {\n              className: classes.content__pagination,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 7\n              }\n            }, numberPages > 0 || !router.isFallback ? __jsx(Pagination, {\n              page: parseInt(router.query.page || '1'),\n              count: numberPages,\n              defaultPage: 1,\n              renderItem: function renderItem(item) {\n                return __jsx(PaginationItem, _extends({\n                  component: MaterialUiLink,\n                  query: router.query,\n                  item: item\n                }, item, {\n                  __self: _this,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 64,\n                    columnNumber: 17\n                  }\n                }));\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 53\n              }\n            }) : __jsx(Skeleton, {\n              variant: \"rect\",\n              width: '30vw',\n              height: '28px',\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 13\n              }\n            })), __jsx(\"div\", {\n              className: classes.content__items,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 7\n              }\n            }, products && products.length > 0 || !router.isFallback ? products === null || products === void 0 ? void 0 : products.map(function (p) {\n              return __jsx(Link, {\n                href: \"/products/details/[id]\",\n                as: \"/products/details/\".concat(p.id),\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 15\n                }\n              }, __jsx(Card, {\n                className: classes.content__item,\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 17\n                }\n              }, __jsx(CardActionArea, {\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 19\n                }\n              }, __jsx(CardMedia, {\n                className: classes.item__media,\n                image: \"https://cdn.bike24.net/i/mb/d8/fa/b2/277893-00-d-557791.jpg\",\n                title: \"Contemplative Reptile\",\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 82,\n                  columnNumber: 21\n                }\n              }), __jsx(CardContent, {\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 21\n                }\n              }, __jsx(Typography, {\n                gutterBottom: true,\n                variant: \"h5\",\n                component: \"h2\",\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 23\n                }\n              }, p === null || p === void 0 ? void 0 : p.name), __jsx(Typography, {\n                variant: \"body2\",\n                color: \"textSecondary\",\n                component: \"p\",\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 23\n                }\n              }, \"Maximum impact cushioning. The brutal, repetitive, downward force of sport can wreak havoc on the body and on performance. Max Air cushioning is specifically engineered to handle these impacts and provide protection. Max Air is big air designed to take a pounding.\"), __jsx(Typography, {\n                className: classes.item__price,\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 23\n                }\n              }, \"PRICE: 60.0 Euro\"))), __jsx(CardActions, {\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 19\n                }\n              }, __jsx(Button, {\n                size: \"small\",\n                color: \"primary\",\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 21\n                }\n              }, \"Add To Cart\"), __jsx(Button, {\n                size: \"small\",\n                color: \"primary\",\n                __self: _this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 21\n                }\n              }, \"Learn More\"))));\n            }) : __jsx(Box, {\n              className: classes.content__skeleton,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 13\n              }\n            }, __jsx(Skeleton, {\n              variant: \"rect\",\n              width: '28vw',\n              height: '720px',\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 15\n              }\n            }), __jsx(\"div\", {\n              className: classes.wrapper__loading,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 15\n              }\n            }, __jsx(Loading, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }\n            }))))));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }), \"y+nxznVgQ96pr4dCg1EC6WdujUg=\", false, function () {\n    return [useStyles, useRouter];\n  }));\n  return _Products.apply(this, arguments);\n}\n\n_c = Products;\nexport function MaterialUiLink(_ref2) {\n  var item = _ref2.item,\n      query = _ref2.query,\n      props = _objectWithoutProperties(_ref2, [\"item\", \"query\"]);\n\n  return __jsx(Link, {\n    href: \"/products/[page]\",\n    as: \"/products/\".concat(item.page),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }\n  }, __jsx(\"a\", _extends({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  })));\n}\n_c3 = MaterialUiLink;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Products\");\n$RefreshReg$(_c2, \"Products\");\n$RefreshReg$(_c3, \"MaterialUiLink\");","map":{"version":3,"sources":["/Users/phan/Desktop/Integrify/fullstack-graphql-next-nexus-prisma/pages/products/[page].tsx"],"names":["React","useStyles","Card","CardMedia","CardContent","Typography","CardActionArea","CardActions","Button","Loading","gql","client","Link","useRouter","Pagination","PaginationItem","Skeleton","Box","ALL_PRODUCTS","Products","products","data","numberPages","classes","readQuery","query","variables","skip","first","take","localCache","console","log","router","wrapper","content__tittle","content__pagination","isFallback","parseInt","page","item","MaterialUiLink","content__items","length","map","p","id","content__item","item__media","name","item__price","content__skeleton","wrapper__loading","props"],"mappings":"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","sourcesContent":["import React from 'react'\nimport useStyles from './style'\nimport { PaginationRenderItemParams } from '@material-ui/lab';\nimport { Card, CardMedia, CardContent, Typography, CardActionArea, CardActions, Button } from '@material-ui/core'\nimport {GetStaticPaths, GetStaticProps} from \"next\";\nimport Loading from \"../../components/Loading\";\nimport {gql} from \"@apollo/client\";\nimport client from \"../apollo\";\nimport {Product} from \"../../interfaces\";\nimport Link from \"next/link\";\nimport {useRouter} from \"next/router\";\nimport Pagination from '@material-ui/lab/Pagination';\nimport PaginationItem from '@material-ui/lab/PaginationItem';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport Box from '@material-ui/core/Box';\nimport { ParsedUrlQuery } from 'querystring';\nimport { PrismaClient } from \"@prisma/client\"\nconst prisma2 = new PrismaClient()\n\nconst ALL_PRODUCTS = gql`\n    query allProducts($skip: String!, $take: String!) {\n        allProducts(skip: $skip, take: $take) {\n            id\n            name\n        }\n    }\n`\n\nexport interface IProducts {\n  products: Product[]\n  numberPages: number,\n  data: any\n}\n\nexport default async function Products({ products, data, numberPages }: IProducts) {\n  const classes = useStyles();\n\n  const localCache = await client.readQuery({\n    query: ALL_PRODUCTS,\n    variables: {\n      skip: first,\n      take: take as string\n    },\n  } );\n\n  console.log(' comp localCache', localCache)\n  const router = useRouter();\n  // if( router.isFallback || !products) {\n  //   return <Loading/>\n  // }\n\n  return (\n    <div className={classes.wrapper}>\n      <div className={classes.content__tittle}>\n        <div>POPULAR PRODUCTS</div>\n      </div>\n      <Box className={classes.content__pagination}>\n        {\n          (numberPages > 0 || !router.isFallback)? (<Pagination\n              page={parseInt(router.query.page as string || '1')}\n              count={numberPages}\n              defaultPage={1}\n              renderItem={(item) => (\n                <PaginationItem\n                  component={MaterialUiLink}\n                  query={router.query}\n                  item={item}\n                  {...item}\n                />\n              )}\n            />) :\n            <Skeleton variant=\"rect\" width={'30vw'} height={'28px'} />\n        }\n      </Box>\n      <div className={classes.content__items}>\n        {\n          ((products && products.length > 0) || !router.isFallback) ?\n            (products?.map(p=> (\n              <Link href=\"/products/details/[id]\" as={`/products/details/${p.id}`}>\n                <Card className={classes.content__item}>\n                  <CardActionArea>\n                    <CardMedia className={classes.item__media}\n                               image=\"https://cdn.bike24.net/i/mb/d8/fa/b2/277893-00-d-557791.jpg\"\n                               title=\"Contemplative Reptile\"\n                    />\n                    <CardContent>\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                        {p?.name}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                        Maximum impact cushioning. The brutal, repetitive,\n                        downward force of sport can wreak havoc on the body and on performance.\n                        Max Air cushioning is specifically engineered to handle these impacts and provide protection.\n                        Max Air is big air designed to take a pounding.\n                      </Typography>\n                      <Typography className={classes.item__price} >PRICE: 60.0 Euro</Typography>\n                    </CardContent>\n                  </CardActionArea>\n                  <CardActions>\n                    <Button size=\"small\" color=\"primary\">\n                      Add To Cart\n                    </Button>\n                    <Button size=\"small\" color=\"primary\">\n                      Learn More\n                    </Button>\n                  </CardActions>\n                </Card>\n              </Link>\n\n            ))) :\n            <Box className={classes.content__skeleton}>\n              <Skeleton variant=\"rect\" width={'28vw'} height={'720px'} />\n              <div className={classes.wrapper__loading}>\n                <Loading />\n              </div>\n            </Box>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport const getStaticProps:GetStaticProps = async (ctx) => {\n  const take = '3';\n  const totalProducts = await prisma2.product.findMany();\n  const productsArray = Object.keys(totalProducts).map((k) => totalProducts[parseInt(k)])\n  const numberPages = Math.ceil((productsArray?.length || 0) as number / +take) as number;\n  const pageQuery = (ctx?.params?.page || 1) as string;\n\n  const first = String((parseInt(pageQuery) -1) * (+take))\n\n  const localCache = await client.readQuery({\n    query: ALL_PRODUCTS,\n    variables: {\n      skip: first,\n      take: take as string\n    },\n  } );\n  console.log('localCache', localCache)\n\n\n  const {  data } = await client.query({\n    query: ALL_PRODUCTS,\n    variables: {\n      skip: first,\n      take: take\n    }\n  })\n\n  console.log('static props ...')\n  const products = Object.keys(data).map((k) => data[k])[0]\n\n  if (data) {\n    console.log('111111')\n    await client.writeQuery({\n      query: ALL_PRODUCTS,\n      variables: {\n        skip: first,\n        take: take as string\n      },\n      data: {\n        ...data\n      },\n    });\n  }\n\nconsole.log(' server build...', data)\n  return {\n    props: {\n      products,\n      data,\n      numberPages\n    },\n  }\n}\n\nexport const getStaticPaths:GetStaticPaths<{page:string}> = async () => {\n  return {\n    paths: [\n      { params: { page: '1' } },\n      { params: { page: '2' } },\n      { params: { page: '3' } }\n    ],\n    fallback: true\n  };\n}\n\nexport interface MaterialUiLinkProps {\n  item: PaginationRenderItemParams;\n  query: ParsedUrlQuery;\n}\n\nexport function MaterialUiLink({ item, query, ...props }: MaterialUiLinkProps) {\n  return (\n    <Link\n      href=\"/products/[page]\"\n      as={`/products/${item.page}`}\n    >\n      <a {...props}></a>\n    </Link>\n  );\n}"]},"metadata":{},"sourceType":"module"}